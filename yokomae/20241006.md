# 決勝用ソースコードの、予選からの変化点調査

## aichallenge_system
下記が追加されている
- aichallenge_awsim_adapter
　ActuationCommandStampedのaccel_cmd, brake_cmd, 現在速度から、accel_map.csv, brake_map.csvで設定された変換を行って、AckermannControlCommandの、longitudinal.acceleration に反映している。
  他の変換はしていない。
　accel_map.csv, brake_map.csvのフォーマット仕様は、使用している関数が不明なので、下記と想定
　現在速度と、指令ペダル値とのテーブル。
　ペダル開放では、-0.3で減速する。
　ブレーキ全踏みで、最大加速度の-2.5倍の加速度で減速するように設定されている。
　速度テーブルは0-10で正規化されているように読める。
　以下は、accel_map.csv。1行目が速度、1列目がペダル踏み込み量と想定。
~~~
default, 0.0    ,2.0    ,4.0    ,6.0    ,8.0    ,10.0
    0.0, -0.3   ,-0.3   ,-0.3   ,-0.3   ,-0.3   ,-0.3
    0.1, 0.0    ,0.0    ,0.0    ,0.0    ,0.0    ,0.0
    0.2, 0.01   ,0.01   ,0.01   ,0.01   ,0.01   ,0.01
    0.3, 0.05   ,0.05   ,0.05   ,0.05   ,0.05   ,0.05
    0.4, 0.1    ,0.1    ,0.1    ,0.1    ,0.1    ,0.1
    0.5, 0.175  ,0.175  ,0.175  ,0.175  ,0.175  ,0.175
    0.6, 0.25   ,0.25   ,0.25   ,0.25   ,0.25   ,0.25 
    0.8, 0.7    ,0.7    ,0.7    ,0.7    ,0.7    ,0.7 
    1.0, 1.0    ,1.0    ,1.0    ,1.0    ,1.0    ,1.0 
~~~

## aichallenge_submit
下記が追加されている
- mapファイル
　- accel_map.csv
　- brake_map.csv
　- steer_map.csv
  上記のうち、steer_map.csvは使われていないようだ。
  前者２つは、aichallenge_system側で前述の通り使われている。


下記のインタフェースが追加されている
- /control/command/actuation_cmd

## 調査残件
- 自己位置推定に関する部分
- /control/command/actuation_cmdと/control/command/control_cmdの関係
- 

